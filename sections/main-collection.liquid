
{% schema %}
{ "name": "Main collection", "settings": [] }
{% endschema %}
<section style="padding:32px 0">
  <div class="container">
    <h1 class="section-title">{{ collection.title }}</h1>
    {% if collection.description != blank %}<p class="section-sub">{{ collection.description }}</p>{% endif %}
    <div style="display:grid;grid-template-columns:280px 1fr;gap:28px">
      <aside>
        <form>
          {% for filter in collection.filters %}
            <div style="margin:0 0 18px">
              <h4 style="margin:.2rem 0 .4rem">{{ filter.label }}</h4>
              {% case filter.type %}
                {% when 'list' or 'boolean' %}
                  {% for v in filter.values %}
                    <label style="display:flex;align-items:center;gap:8px;margin:6px 0">
                      <input type="checkbox" name="{{ v.param_name }}" value="{{ v.value }}" {% if v.active %}checked{% endif %}>
                      <span>{{ v.label }} ({{ v.count }})</span>
                    </label>
                  {% endfor %}
                {% when 'price_range' %}
                  <div style="display:flex;gap:8px">
                    <input type="number" name="{{ filter.min_value.param_name }}" value="{{ filter.min_value.value | money_without_currency }}" placeholder="Min" class="qty">
                    <input type="number" name="{{ filter.max_value.param_name }}" value="{{ filter.max_value.value | money_without_currency }}" placeholder="Max" class="qty">
                  </div>
              {% endcase %}
            </div>
          {% endfor %}
          <button class="btn btn-outline" type="submit">Aplicar filtros</button>
        </form>
      </aside>
      <div>
        {% paginate collection.products by 24 %}
          <div class="grid grid-3">
            {% for product in collection.products %}
              {% render 'product-card', product: product %}
            {% endfor %}
          </div>
          <div style="display:flex;justify-content:center;gap:10px;margin-top:18px">
            {% if paginate.previous %}<a class="btn btn-outline" href="{{ paginate.previous.url }}">Anterior</a>{% endif %}
            <span class="badge">{{ paginate.current_page }} / {{ paginate.pages }}</span>
            {% if paginate.next %}<a class="btn btn-outline" href="{{ paginate.next.url }}">Siguiente</a>{% endif %}
          </div>
        {% endpaginate %}
      </div>
    </div>
  </div>
</section>
