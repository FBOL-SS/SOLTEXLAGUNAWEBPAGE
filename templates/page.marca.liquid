{{ page.title }}

<div class="page-marca">
  {% liquid
    assign marca = page.handle | replace: '-', ''
    assign collection_url = routes.collections_url | append: '/machines?'
    assign filter_param = 'filter.p.m.custom.marca=' | append: marca
  %}
  
  <section class="hero" style="text-align: center; padding: 40px 20px;">
    {% if page.metafields.custom.logo %}
      <img src="{{ page.metafields.custom.logo | image_url: width: 200 }}" 
           alt="{{ page.title }} Logo" 
           width="200" 
           height="100" 
           loading="lazy">
    {% endif %}
    <h1 style="font-size: 2.5rem; margin: 20px 0;">{{ page.title }}</h1>
  </section>
  
  <section class="history" style="max-width: 800px; margin: 0 auto 40px; padding: 0 20px;">
    {{ page.content }}
  </section>
  
  <section class="filters" style="padding: 0 20px; margin-bottom: 40px;">
    <h2 style="text-align: center; margin-bottom: 20px;">Filtros por Uso</h2>
    <ul style="list-style: none; padding: 0; display: flex; justify-content: center; gap: 20px; flex-wrap: wrap;">
      {% if marca == 'supreme' or marca == 'jack' %}
        <li><a href="{{ collection_url }}{{ filter_param }}&filter.p.m.custom.uso=jeans" style="color: #6b7280; text-decoration: none; padding: 8px 16px; border: 1px solid #e5e7eb; border-radius: 4px;">Jeans</a></li>
        <li><a href="{{ collection_url }}{{ filter_param }}&filter.p.m.custom.uso=tejido" style="color: #6b7280; text-decoration: none; padding: 8px 16px; border: 1px solid #e5e7eb; border-radius: 4px;">Tejido</a></li>
        <li><a href="{{ collection_url }}{{ filter_param }}&filter.p.m.custom.uso=automatizado" style="color: #6b7280; text-decoration: none; padding: 8px 16px; border: 1px solid #e5e7eb; border-radius: 4px;">Automatizado</a></li>
      {% elsif marca == 'eagle-special' %}
        <li><a href="{{ collection_url }}{{ filter_param }}&filter.p.m.custom.uso=cuero" style="color: #6b7280; text-decoration: none; padding: 8px 16px; border: 1px solid #e5e7eb; border-radius: 4px;">Cuero</a></li>
        <li><a href="{{ collection_url }}{{ filter_param }}&filter.p.m.custom.uso=pesados" style="color: #6b7280; text-decoration: none; padding: 8px 16px; border: 1px solid #e5e7eb; border-radius: 4px;">Pesados</a></li>
        <li><a href="{{ collection_url }}{{ filter_param }}&filter.p.m.custom.uso=industrial" style="color: #6b7280; text-decoration: none; padding: 8px 16px; border: 1px solid #e5e7eb; border-radius: 4px;">Industrial</a></li>
      {% endif %}
      <li><a href="{{ collection_url }}{{ filter_param }}" style="color: #6b7280; text-decoration: none; padding: 8px 16px; border: 1px solid #e5e7eb; border-radius: 4px;">Ver Todas</a></li>
    </ul>
  </section>
  
  <section class="products">
    <div class="collection page-width" id="Collection">
      <h2 style="text-align: center; margin-bottom: 40px;">Productos {{ page.title }}</h2>
      {% paginate collections['machines'].products by 24 %}
        <ul class="grid product-grid grid--4-col-desktop grid--2-col-tablet-down">
          {% for product in collections['machines'].products %}
            {% if product.metafields.custom.marca == marca %}
              <li class="grid__item">
                <div class="card-wrapper product-card">
                  <div class="card card--standard">
                    <div class="card__inner">
                      {% if product.featured_media %}
                        <div class="card__media">
                          <img src="{{ product.featured_media | image_url: width: 400 }}"
                               alt="{{ product.featured_media.alt | escape }}"
                               width="400" height="400"
                               loading="lazy">
                        </div>
                      {% endif %}
                      <div class="card__content">
                        <h3 class="card__heading">
                          <a href="{{ product.url }}">{{ product.title }}</a>
                        </h3>
                        <div class="card-information">
                          <span class="price">{{ product.price | money }}</span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </li>
            {% endif %}
          {% endfor %}
        </ul>
        
        {% if paginate.pages > 1 %}
          <nav class="pagination">
            {% if paginate.previous %}
              <a href="{{ paginate.previous.url }}" class="pagination__link">← Anterior</a>
            {% endif %}
            {% for part in paginate.parts %}
              {% if part.is_link %}
                <a href="{{ part.url }}" class="pagination__link">{{ part.title }}</a>
              {% else %}
                <span class="pagination__text">{{ part.title }}</span>
              {% endif %}
            {% endfor %}
            {% if paginate.next %}
              <a href="{{ paginate.next.url }}" class="pagination__link">Siguiente →</a>
            {% endif %}
          </nav>
        {% endif %}
      {% endpaginate %}
    </div>
  </section>
</div>

<style>
.page-marca .filters a:hover { 
  color: #000; 
  border-color: #000; 
}
.product-grid { list-style: none; padding: 0; margin: 0; display: grid; gap: 20px; }
.card { border: 1px solid #e5e7eb; border-radius: 8px; overflow: hidden; }
.card__media img { width: 100%; height: 200px; object-fit: cover; }
.card__content { padding: 15px; }
.card__heading a { color: #000; text-decoration: none; font-weight: 600; }
.price { color: #6b7280; font-weight: 500; }
.pagination { text-align: center; margin-top: 40px; }
.pagination__link { margin: 0 5px; padding: 8px 12px; border: 1px solid #e5e7eb; text-decoration: none; color: #6b7280; }
.pagination__link:hover { border-color: #000; color: #000; }
.pagination__text { margin: 0 5px; }
</style>